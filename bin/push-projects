#!/bin/sh
#
# Push updates to all of your projects in one command.
#
# Assumes you are using my dotfiles from github.com/memborsky/dotfiles

# Change to your github username.
GITHUB_USERNAME="memborsky"

if ! [ -z "$PROJECT_HOME" ]
then
  CURRENT_PATH=$(pwd)

  for project in $(ls $PROJECT_HOME)
  do
    cd $PROJECT_HOME/$project

    if [ -d .git ]
    then
      if ! [ -z "$(git cherry -v @{upstream} 2> /dev/null)" ]
      then
        remote=$(git remote -v | grep -v https | awk '/.*'"$GITHUB_USERNAME"'.*push/ {print $1}')

        git push $remote HEAD
      fi
    fi
  done

  cd $CURRENT_PATH
fi